<!DOCTYPE html>
<!-- D√©claration du type de document : HTML5 -->

<html lang="fr">
<!-- Page en fran√ßais -->

<head>
    <!-- En-t√™te du document (m√©tadonn√©es, titre, styles) -->

    <meta charset="UTF-8">
    <!-- Encodage UTF-8 pour bien g√©rer les accents -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Affichage adapt√© aux √©crans (PC, tablette, smartphone) -->

    <title>6e ‚Äì Additions et soustractions de d√©cimaux (interactif)</title>
    <!-- Titre de l‚Äôonglet du navigateur -->

    <style>
        /* ===============================
           STYLES G√âN√âRAUX
        ================================= */

        body {
            /* Style global du corps de page */
            margin: 0;
            /* Pas de marge ext√©rieure */
            padding: 0;
            /* Pas de marge int√©rieure */
            font-family: Arial, Helvetica, sans-serif;
            /* Police lisible */
            background: linear-gradient(135deg, #0f172a, #1e293b);
            /* Fond d√©grad√© bleu nuit */
            color: #e5e7eb;
            /* Texte gris clair */
        }

        header {
            /* Bandeau sup√©rieur */
            background: linear-gradient(90deg, #2563eb, #4f46e5);
            /* D√©grad√© bleu/violet */
            color: #ffffff;
            /* Texte blanc */
            padding: 20px;
            /* Espacement interne */
            text-align: center;
            /* Centrage du texte */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
            /* Ombre sous le bandeau */
        }

        header h1 {
            /* Titre principal du bandeau */
            margin: 0;
            /* Pas de marge */
            font-size: 1.6rem;
            /* Taille du texte */
        }

        header p {
            /* Sous-titre */
            margin: 6px 0 0 0;
            /* Petite marge au-dessus */
            font-size: 0.95rem;
            /* Taille de police un peu plus petite */
        }

        main {
            /* Bloc principal de contenu */
            max-width: 1100px;
            /* Largeur max */
            margin: 20px auto 40px auto;
            /* Centrage horizontal + marges verticales */
            background: rgba(15, 23, 42, 0.95);
            /* Fond sombre semi-opaque */
            border-radius: 12px;
            /* Coins arrondis */
            padding: 20px;
            /* Espacement interne */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            /* Ombre autour du bloc */
        }

        h2 {
            /* Titres de section */
            color: #60a5fa;
            /* Bleu clair */
            border-bottom: 1px solid #1f2937;
            /* Trait de s√©paration */
            padding-bottom: 4px;
            /* Espacement sous le texte */
            margin-top: 18px;
            /* Marge sup√©rieure */
        }

        .info {
            /* Bloc d‚Äôinfos g√©n√©rales (niveau, th√®me, objectif) */
            background: #111827;
            /* Fond gris tr√®s fonc√© */
            border-radius: 8px;
            /* Coins arrondis */
            padding: 10px 12px;
            /* Espacement interne */
            margin-bottom: 15px;
            /* Marge inf√©rieure */
            border-left: 4px solid #3b82f6;
            /* Barre bleue √† gauche */
            font-size: 0.95rem;
            /* Taille de texte */
        }

        .badge {
            /* Petites pastilles (niveau, th√®me) */
            display: inline-block;
            /* Affichage en ligne */
            padding: 2px 8px;
            /* Espacement interne */
            border-radius: 999px;
            /* Forme de pilule */
            font-size: 0.75rem;
            /* Petite police */
            margin-right: 6px;
            /* Espace √† droite */
        }

        .badge-niveau {
            /* Badge de niveau */
            background: #22c55e;
            /* Vert */
            color: #052e16;
            /* Texte vert fonc√© */
        }

        .badge-theme {
            /* Badge de th√®me */
            background: #f97316;
            /* Orange */
            color: #1b1305;
            /* Texte fonc√© */
        }

        .scoreboard {
            /* Bloc du score global */
            margin: 10px 0 20px 0;
            /* Marges */
            padding: 10px;
            /* Espacement interne */
            background: #020617;
            /* Fond tr√®s sombre */
            border-radius: 8px;
            /* Coins arrondis */
            border: 1px solid #1f2937;
            /* Bordure gris fonc√© */
            display: flex;
            /* Disposition en ligne */
            justify-content: space-between;
            /* Espacement entre √©l√©ments */
            align-items: center;
            /* Alignement vertical */
        }

        .scoreboard strong {
            /* Mise en valeur dans le score */
            color: #facc15;
            /* Jaune vif */
        }

        .btn-reset {
            /* Bouton de r√©initialisation des r√©ponses */
            background: #ef4444;
            /* Rouge */
            color: #ffffff;
            /* Texte blanc */
            border: none;
            /* Pas de bordure */
            padding: 6px 10px;
            /* Espacement interne */
            border-radius: 6px;
            /* Coins arrondis */
            font-size: 0.85rem;
            /* Taille texte */
            cursor: pointer;
            /* Curseur main */
        }

        .btn-reset:hover {
            /* Survol du bouton reset */
            background: #b91c1c;
            /* Rouge plus fonc√© */
        }

        .cours-toggle {
            /* Bouton pour afficher/masquer le rappel de cours */
            background: #0ea5e9;
            /* Bleu clair */
            color: #082f49;
            /* Texte bleu fonc√© */
            border: none;
            /* Pas de bordure */
            padding: 6px 10px;
            /* Espacement */
            border-radius: 6px;
            /* Coins arrondis */
            cursor: pointer;
            /* Curseur main */
            font-size: 0.85rem;
            /* Taille texte */
            margin-bottom: 10px;
            /* Marge inf√©rieure */
        }

        .cours-toggle:hover {
            /* Survol du bouton cours */
            background: #0369a1;
            /* Bleu plus fonc√© */
            color: #e0f2fe;
            /* Texte plus clair */
        }

        .cours {
            /* Bloc du rappel de cours */
            background: #020617;
            /* Fond tr√®s sombre */
            border-radius: 8px;
            /* Coins arrondis */
            padding: 10px;
            /* Espacement interne */
            margin-bottom: 20px;
            /* Marge inf√©rieure */
            border: 1px solid #1e293b;
            /* Bordure */
            display: none;
            /* Masqu√© par d√©faut */
            font-size: 0.9rem;
            /* L√©g√®rement plus petit */
        }

        .cours ul {
            /* Liste du rappel de cours */
            padding-left: 18px;
            /* D√©calage pour les puces */
        }

        .exercice {
            /* Bloc pour chaque exercice */
            background: #0b1120;
            /* Fond bleu nuit */
            border-radius: 8px;
            /* Coins arrondis */
            padding: 10px 12px;
            /* Espacement interne */
            margin-bottom: 12px;
            /* Marge inf√©rieure */
            border: 1px solid #1f2937;
            /* Bordure sombre */
        }

        .exercice h3 {
            /* Titre de l‚Äôexercice */
            margin: 0 0 6px 0;
            /* Marge basse */
            font-size: 1rem;
            /* Taille de police */
            color: #bfdbfe;
            /* Bleu tr√®s clair */
        }

        .enonce {
            /* Texte de l‚Äô√©nonc√© */
            font-size: 0.95rem;
            /* Taille de police */
            margin-bottom: 4px;
            /* Marge basse */
        }

        .meta {
            /* Infos meta : points, type */
            font-size: 0.8rem;
            /* Petite police */
            color: #9ca3af;
            /* Gris clair */
            margin-bottom: 6px;
            /* Marge basse */
        }

        .zone-reponse {
            /* Ligne regroupant la saisie + boutons + message */
            display: flex;
            /* Affichage en ligne */
            flex-wrap: wrap;
            /* Retour √† la ligne possible */
            gap: 6px;
            /* Espacement entre √©l√©ments */
            align-items: center;
            /* Alignement vertical */
            margin-top: 4px;
            /* Marge haute */
        }

        .zone-reponse input[type="text"] {
            /* Champs de saisie des r√©ponses */
            padding: 4px 6px;
            /* Espacement interne */
            border-radius: 4px;
            /* Coins arrondis */
            border: 1px solid #4b5563;
            /* Bordure grise */
            background: #020617;
            /* Fond sombre */
            color: #e5e7eb;
            /* Texte clair */
            min-width: 80px;
            /* Largeur minimale */
        }

        .btn {
            /* Style commun des petits boutons */
            border: none;
            /* Pas de bordure */
            padding: 4px 8px;
            /* Espacement interne */
            border-radius: 4px;
            /* Coins arrondis */
            font-size: 0.8rem;
            /* Petite police */
            cursor: pointer;
            /* Curseur main */
        }

        .btn-valider {
            /* Bouton Valider */
            background: #22c55e;
            /* Vert */
            color: #022c22;
            /* Texte vert fonc√© */
        }

        .btn-valider:hover {
            /* Survol Valider */
            background: #16a34a;
            /* Vert plus fonc√© */
        }

        .btn-aide {
            /* Bouton Aide */
            background: #3b82f6;
            /* Bleu */
            color: #eff6ff;
            /* Texte clair */
        }

        .btn-aide:hover {
            /* Survol Aide */
            background: #1d4ed8;
            /* Bleu plus fonc√© */
        }

        .btn-correction {
            /* Bouton Correction */
            background: #facc15;
            /* Jaune */
            color: #422006;
            /* Texte fonc√© */
        }

        .btn-correction:hover {
            /* Survol Correction */
            background: #eab308;
            /* Jaune plus vif */
        }

        .message {
            /* Zone de message (OK / erreur) */
            min-width: 120px;
            /* Largeur min */
            font-size: 0.8rem;
            /* Petite police */
        }

        .message.ok {
            /* Message de r√©ussite */
            color: #4ade80;
            /* Vert clair */
        }

        .message.ko {
            /* Message d‚Äôerreur */
            color: #f97316;
            /* Orange vif */
        }

        .aide-texte,
        .correction-texte {
            /* Bloc de texte pour aide / correction */
            margin-top: 4px;
            /* Marge haute */
            font-size: 0.8rem;
            /* Petite police */
            display: none;
            /* Masqu√© par d√©faut */
        }

        .aide-texte {
            /* Couleur de l‚Äôaide */
            color: #7dd3fc;
            /* Bleu clair */
        }

        .correction-texte {
            /* Couleur de la correction */
            color: #fbbf24;
            /* Jaune orang√© */
        }

        .colonne-op {
            /* Tableau pour op√©rations pos√©es */
            border-collapse: collapse;
            /* Fusion des bordures */
            margin-top: 6px;
            /* Marge haute */
        }

        .colonne-op td {
            /* Cellules du tableau d‚Äôop√©ration */
            border: 1px solid #4b5563;
            /* Bordure grise */
            width: 30px;
            /* Largeur */
            height: 28px;
            /* Hauteur */
            text-align: center;
            /* Texte centr√© */
            vertical-align: middle;
            /* Alignement vertical */
        }

        .colonne-op input {
            /* Champs dans la colonne d‚Äôaddition */
            width: 95%;
            /* Largeur quasi totale */
            border: none;
            /* Pas de bordure */
            background: transparent;
            /* Fond transparent */
            color: #e5e7eb;
            /* Texte clair */
            text-align: center;
            /* Centr√© */
        }

        .ligne-signe {
            /* Ligne o√π se trouve le signe + ou - */
            font-weight: bold;
            /* Texte en gras */
        }

        .separateur {
            /* Ligne de s√©paration de l‚Äôop√©ration */
            border-top: 2px solid #e5e7eb !important;
            /* Trait plus √©pais en haut */
        }
    </style>
    <!-- Fin des styles -->
</head>
<!-- Fin de l‚Äôen-t√™te -->

<body>
    <!-- Corps de la page -->

    <header>
        <!-- Bandeau sup√©rieur -->

        <h1>6e ‚Äì Additions et soustractions de nombres d√©cimaux</h1>
        <!-- Titre principal -->

        <p>üßÆ Choc des savoirs ‚Äì Fiche interactive avec probl√®mes et technique op√©ratoire</p>
        <!-- Sous-titre descriptif -->
    </header>
    <!-- Fin du bandeau -->

    <main>
        <!-- Bloc principal -->

        <div class="info">
            <!-- Informations g√©n√©rales -->

            <span class="badge badge-niveau">Niveau : 6e</span>
            <!-- Badge niveau -->

            <span class="badge badge-theme">Th√®me : d√©cimaux ‚Äì additions & soustractions</span>
            <!-- Badge th√®me -->

            <p>
                <!-- Paragraphe d‚Äôobjectifs -->

                üéØ Objectif : savoir poser, calculer et v√©rifier des additions et soustractions de nombres d√©cimaux,
                puis r√©soudre des probl√®mes proches de la vie quotidienne.
                <!-- Description -->
            </p>
        </div>
        <!-- Fin du bloc info -->

        <div class="scoreboard">
            <!-- Zone du score -->

            <div>
                <!-- Texte du score -->

                Score actuel : <strong id="score">0</strong> / <strong id="scoreMax">20</strong> points
                <!-- Affichage du score et du maximum -->
            </div>
            <!-- Fin du texte -->

            <button class="btn-reset" id="btnReset">
                <!-- Bouton de r√©initialisation -->

                üîÅ R√©initialiser les r√©ponses
                <!-- Texte du bouton -->
            </button>
            <!-- Fin du bouton -->
        </div>
        <!-- Fin du scoreboard -->

        <button class="cours-toggle" id="btnCours">
            <!-- Bouton pour afficher / masquer le rappel de cours -->

            üìò Afficher / masquer le rappel de cours
            <!-- Texte du bouton -->
        </button>
        <!-- Fin du bouton cours -->

        <section class="cours" id="blocCours">
            <!-- Rappel de cours masqu√© au d√©part -->

            <h2>Rappel de cours ‚Äì Nombres d√©cimaux</h2>
            <!-- Titre du rappel -->

            <ul>
                <!-- Liste des points de cours -->

                <li>Un nombre d√©cimal poss√®de une partie enti√®re et une partie d√©cimale s√©par√©es par une virgule
                    (exemple : 12,5).</li>
                <!-- Point 1 -->

                <li>Pour additionner ou soustraire des d√©cimaux, on <strong>aligne les virgules</strong>, puis on
                    calcule colonne par colonne.</li>
                <!-- Point 2 -->

                <li>On peut ajouter des z√©ros apr√®s la virgule pour avoir le m√™me nombre de chiffres dans chaque
                    nombre.</li>
                <!-- Point 3 -->

                <li>On v√©rifie toujours si le r√©sultat est coh√©rent (ordre de grandeur, estimation, contexte du
                    probl√®me).</li>
                <!-- Point 4 -->
            </ul>
            <!-- Fin de la liste -->
        </section>
        <!-- Fin du rappel de cours -->

        <!-- ===================================================
             PARTIE A ‚Äì PROBL√àMES (FICHE 1 ‚Äì 12 EXERCICES)
        ====================================================== -->

        <h2>Partie A ‚Äì Probl√®mes avec d√©cimaux (fiche 1)</h2>
        <!-- Titre de section -->

        <!-- Exercice 1 ‚Äì Le cahier de calcul -->
        <div class="exercice" data-points="1">
            <!-- Exercice √† 1 point -->

            <h3>Exercice 1 ‚Äì Le cahier de calcul</h3>
            <!-- Titre exercice -->

            <div class="enonce">
                <!-- √ânonc√© -->

                Un cahier co√ªte <strong>4,80&nbsp;‚Ç¨</strong>. Lina a <strong>12,50&nbsp;‚Ç¨</strong> et ach√®te le cahier.
                Combien lui reste-t-il ?
                <!-- Texte issu du PDF 1 -->
            </div>

            <div class="meta">
                <!-- Infos suppl√©mentaires -->

                üí∞ Probl√®me de monnaie ‚Äì <strong>1 point</strong>
                <!-- Type et points -->
            </div>

            <div class="zone-reponse">
                <!-- Ligne de r√©ponse -->

                <input type="text" class="reponse" data-correct="7.7" placeholder="R√©ponse en ‚Ç¨">
                <!-- R√©ponse attendue : 7,70 ‚Ç¨ (not√©e 7.7 en JS) -->

                <button class="btn btn-valider">Valider</button>
                <!-- Bouton valider -->

                <button class="btn btn-aide">Aide</button>
                <!-- Bouton aide -->

                <button class="btn btn-correction">Correction</button>
                <!-- Bouton correction -->

                <span class="message"></span>
                <!-- Message de feedback -->
            </div>

            <div class="aide-texte">
                <!-- Aide -->

                üí° Tu dois calculer l‚Äôargent qui reste : <code>12,50 ‚àí 4,80</code>. Pose l‚Äôop√©ration en alignant les
                virgules.
                <!-- Contenu aide -->
            </div>

            <div class="correction-texte">
                <!-- Correction -->

                ‚úÖ On calcule <code>12,50 ‚àí 4,80 = 7,70</code>. Lina garde donc <strong>7,70&nbsp;‚Ç¨</strong>.
                <!-- Correction d√©taill√©e -->
            </div>
        </div>
        <!-- Fin exercice 1 -->

        <!-- Exercice 2 ‚Äì Le trajet du matin -->
        <div class="exercice" data-points="1">
            <h3>Exercice 2 ‚Äì Le trajet du matin</h3>
            <div class="enonce">
                Lucas marche <strong>2,75&nbsp;km</strong>, puis encore <strong>3,4&nbsp;km</strong> pour rejoindre
                l‚Äô√©cole. Quelle distance a-t-il parcourue ?
            </div>
            <div class="meta">
                üö∂‚Äç‚ôÇÔ∏è Distance totale ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="6.15" placeholder="R√©ponse en km">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Additionne les deux distances : <code>2,75 + 3,4</code>. Tu peux √©crire <code>3,40</code> pour bien
                aligner les virgules.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>2,75 + 3,40 = 6,15</code>. Lucas a parcouru <strong>6,15&nbsp;km</strong>.
            </div>
        </div>

        <!-- Exercice 3 ‚Äì La bo√Æte de farine -->
        <div class="exercice" data-points="1">
            <h3>Exercice 3 ‚Äì La bo√Æte de farine</h3>
            <div class="enonce">
                La bo√Æte contient <strong>5,6&nbsp;kg</strong> de farine. La cuisini√®re utilise
                <strong>1,85&nbsp;kg</strong>. Combien reste-t-il ?
            </div>
            <div class="meta">
                ü•ê Masse restante ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="3.75" placeholder="R√©ponse en kg">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Tu calcules ce qu‚Äôil reste : <code>5,6 ‚àí 1,85</code>. Tu peux √©crire <code>5,60</code>.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>5,60 ‚àí 1,85 = 3,75</code>. Il reste <strong>3,75&nbsp;kg</strong> de farine.
            </div>
        </div>

        <!-- Exercice 4 ‚Äì Le compte de Sofia -->
        <div class="exercice" data-points="2">
            <h3>Exercice 4 ‚Äì Le compte de Sofia</h3>
            <div class="enonce">
                Sofia a <strong>68,40&nbsp;‚Ç¨</strong> sur son compte. Elle d√©pense <strong>14,75&nbsp;‚Ç¨</strong>, puis
                re√ßoit <strong>9,5&nbsp;‚Ç¨</strong>. Quel montant a-t-elle maintenant ?
            </div>
            <div class="meta">
                üí≥ Compte bancaire ‚Äì <strong>2 points</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="63.15" placeholder="R√©ponse en ‚Ç¨">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Commence par retirer ce qu‚Äôelle d√©pense, puis ajoute ce qu‚Äôelle re√ßoit.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>68,40 ‚àí 14,75 = 53,65</code>, puis <code>53,65 + 9,50 = 63,15</code>. Sofia a
                <strong>63,15&nbsp;‚Ç¨</strong>.
            </div>
        </div>

        <!-- Exercice 5 ‚Äì La piscine municipale -->
        <div class="exercice" data-points="1">
            <h3>Exercice 5 ‚Äì La piscine municipale</h3>
            <div class="enonce">
                La piscine contient <strong>245,5&nbsp;m¬≥</strong> d‚Äôeau. On en retire
                <strong>18,75&nbsp;m¬≥</strong>, puis on ajoute <strong>12,4&nbsp;m¬≥</strong>. Quel volume y a-t-il
                maintenant ?
            </div>
            <div class="meta">
                üèä‚Äç‚ôÇÔ∏è Volume d‚Äôeau ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="239.15" placeholder="R√©ponse en m¬≥">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Suit l‚Äôordre indiqu√© : on enl√®ve, puis on ajoute.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>245,5 ‚àí 18,75 = 226,75</code>, puis <code>226,75 + 12,4 = 239,15</code>.
            </div>
        </div>

        <!-- Exercice 6 ‚Äì Le plein d‚Äôessence -->
        <div class="exercice" data-points="1">
            <h3>Exercice 6 ‚Äì Le plein d‚Äôessence</h3>
            <div class="enonce">
                Le r√©servoir contient <strong>32,6&nbsp;L</strong> d‚Äôessence. Apr√®s un trajet, il reste
                <strong>27,85&nbsp;L</strong>. Quelle quantit√© a √©t√© consomm√©e ?
            </div>
            <div class="meta">
                ‚õΩ Consommation ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="4.75" placeholder="R√©ponse en L">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Quantit√© consomm√©e = quantit√© au d√©part ‚àí quantit√© restante.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>32,60 ‚àí 27,85 = 4,75</code>. On a consomm√© <strong>4,75&nbsp;L</strong>.
            </div>
        </div>

        <!-- Exercice 7 ‚Äì La r√©serve de nourriture -->
        <div class="exercice" data-points="1">
            <h3>Exercice 7 ‚Äì La r√©serve de nourriture</h3>
            <div class="enonce">
                Le refuge dispose de <strong>92,4&nbsp;kg</strong> de nourriture. Il en consomme
                <strong>27,65&nbsp;kg</strong>, puis re√ßoit <strong>18,9&nbsp;kg</strong>. Quelle quantit√© a-t-il
                maintenant ?
            </div>
            <div class="meta">
                üêæ Stock de nourriture ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="83.65" placeholder="R√©ponse en kg">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° On enl√®ve ce qui est consomm√©, puis on ajoute ce qui est re√ßu.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>92,4 ‚àí 27,65 = 64,75</code>, puis <code>64,75 + 18,9 = 83,65</code>.
            </div>
        </div>

        <!-- Exercice 8 ‚Äì Le budget du voyage -->
        <div class="exercice" data-points="2">
            <h3>Exercice 8 ‚Äì Le budget du voyage</h3>
            <div class="enonce">
                La classe a r√©uni <strong>350,75&nbsp;‚Ç¨</strong>. Elle paie <strong>128,4&nbsp;‚Ç¨</strong>, puis
                <strong>67,85&nbsp;‚Ç¨</strong>. Deux √©l√®ves apportent ensuite <strong>25,5&nbsp;‚Ç¨</strong> chacun. Quel
                montant reste-t-il ?
            </div>
            <div class="meta">
                üöå Probl√®me √† plusieurs √©tapes ‚Äì <strong>2 points</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="205.5" placeholder="R√©ponse en ‚Ç¨">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Commence par enlever les deux d√©penses, puis ajoute l‚Äôargent apport√© par les deux √©l√®ves.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>350,75 ‚àí 128,4 ‚àí 67,85 = 154,5</code>, puis <code>2 √ó 25,5 = 51</code> ‚áí
                <code>154,5 + 51 = 205,5</code>.
            </div>
        </div>

        <!-- Exercice 9 ‚Äì Le stock de mat√©riel -->
        <div class="exercice" data-points="2">
            <h3>Exercice 9 ‚Äì Le stock de mat√©riel</h3>
            <div class="enonce">
                Un magasin a <strong>485,6&nbsp;kg</strong> de mat√©riaux. Il en vend <strong>156,35&nbsp;kg</strong>,
                puis <strong>98,7&nbsp;kg</strong>. Une livraison apporte <strong>120,85&nbsp;kg</strong>. Quelle
                quantit√© reste en stock ?
            </div>
            <div class="meta">
                üß± Probl√®me √† plusieurs √©tapes ‚Äì <strong>2 points</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="351.4" placeholder="R√©ponse en kg">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Tu enl√®ves les ventes, puis tu ajoutes la livraison.
            </div>
            <div class="correction-texte">
                ‚úÖ On peut calculer : <code>485,6 ‚àí 156,35 ‚àí 98,7 = 264,55</code> puis <code>264,55 + 120,85 = 385,4</code>.
                (Tu peux adapter le r√©sultat exact et la tol√©rance selon ta fiche.)
            </div>
        </div>

        <!-- Exercice 10 ‚Äì Le trajet du bus -->
        <div class="exercice" data-points="1">
            <h3>Exercice 10 ‚Äì Le trajet du bus</h3>
            <div class="enonce">
                Le bus doit parcourir <strong>82,5&nbsp;km</strong>. Il fait <strong>31,4&nbsp;km</strong> le matin,
                puis <strong>22,75&nbsp;km</strong> l‚Äôapr√®s-midi. Quelle distance reste-t-il √† parcourir le soir ?
            </div>
            <div class="meta">
                üöå Distance restante ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="28.35" placeholder="R√©ponse en km">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Additionne d‚Äôabord les distances d√©j√† parcourues, puis soustrais-les du total.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>31,4 + 22,75 = 54,15</code>, puis <code>82,5 ‚àí 54,15 = 28,35</code>.
            </div>
        </div>

        <!-- Exercice 11 ‚Äì Le grand aquarium -->
        <div class="exercice" data-points="1">
            <h3>Exercice 11 ‚Äì Le grand aquarium</h3>
            <div class="enonce">
                Un aquarium contient <strong>315,8&nbsp;L</strong> d‚Äôeau. Une vidange enl√®ve
                <strong>74,65&nbsp;L</strong>, puis une fuite <strong>12,4&nbsp;L</strong>. On ajoute ensuite
                <strong>36,9&nbsp;L</strong>. Quel est le volume final d‚Äôeau ?
            </div>
            <div class="meta">
                üê† Volume d‚Äôeau ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="265.65" placeholder="R√©ponse en L">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Tu enl√®ves les deux pertes, puis tu ajoutes ce qu‚Äôon remet.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>315,8 ‚àí 74,65 ‚àí 12,4 = 228,75</code>, puis <code>228,75 + 36,9 = 265,65</code>.
            </div>
        </div>

        <!-- Exercice 12 ‚Äì Le camion de transport -->
        <div class="exercice" data-points="1">
            <h3>Exercice 12 ‚Äì Le camion de transport</h3>
            <div class="enonce">
                Le camion transporte <strong>18,75&nbsp;t</strong>. Il d√©charge <strong>6,8&nbsp;t</strong>, charge
                <strong>9,45&nbsp;t</strong>, puis retire <strong>2,55&nbsp;t</strong>. Quelle masse transporte-t-il √† la
                fin ?
            </div>
            <div class="meta">
                üöö Probl√®me multi-√©tapes ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="18.85" placeholder="R√©ponse en t">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Applique les op√©rations dans l‚Äôordre : ‚àí 6,8 ; + 9,45 ; ‚àí 2,55.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>18,75 ‚àí 6,8 + 9,45 ‚àí 2,55 = 18,85</code>.
            </div>
        </div>

        <!-- ===================================================
             PARTIE B ‚Äì TECHNIQUE OP√âRATOIRE (FICHE 2 ‚Äì 5 EX.)
        ====================================================== -->

        <h2>Partie B ‚Äì Technique op√©ratoire (fiche 2)</h2>

        <!-- Exercice 13 ‚Äì Addition √† poser -->
        <div class="exercice" data-points="1">
            <h3>Exercice 13 ‚Äì Addition √† poser</h3>
            <div class="enonce">
                Calcule : <strong>12,475 + 8,36</strong>
            </div>
            <div class="meta">
                üßÆ Addition de d√©cimaux ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="20.835" placeholder="R√©ponse">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° √âcris <code>8,360</code> pour avoir trois chiffres apr√®s la virgule comme <code>12,475</code>.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>12,475 + 8,360 = 20,835</code>.
            </div>
        </div>

        <!-- Exercice 14 ‚Äì Soustraction √† poser -->
        <div class="exercice" data-points="1">
            <h3>Exercice 14 ‚Äì Soustraction √† poser</h3>
            <div class="enonce">
                Calcule : <strong>25,8 ‚àí 7,425</strong>
            </div>
            <div class="meta">
                ‚ûñ Soustraction de d√©cimaux ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="18.375" placeholder="R√©ponse">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Ajoute des z√©ros : <code>25,800 ‚àí 7,425</code>.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>25,800 ‚àí 7,425 = 18,375</code>.
            </div>
        </div>

        <!-- Exercice 15 ‚Äì Addition √† trois nombres -->
        <div class="exercice" data-points="1">
            <h3>Exercice 15 ‚Äì Addition √† trois nombres</h3>
            <div class="enonce">
                Calcule : <strong>4,208 + 13,7 + 2,95</strong>
            </div>
            <div class="meta">
                üßÆ Addition de trois d√©cimaux ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="20.858" placeholder="R√©ponse">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° √âcris <code>13,700</code> et <code>2,950</code> pour bien aligner les virgules.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>4,208 + 13,700 + 2,950 = 20,858</code>.
            </div>
        </div>

        <!-- Exercice 16 ‚Äì Soustraction avec emprunt -->
        <div class="exercice" data-points="1">
            <h3>Exercice 16 ‚Äì Soustraction avec emprunt</h3>
            <div class="enonce">
                Calcule : <strong>18,504 ‚àí 9,87</strong>
            </div>
            <div class="meta">
                ‚ûñ Soustraction avec retenue ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="8.634" placeholder="R√©ponse">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° √âcris <code>9,870</code>. Quand le chiffre du haut est plus petit, pense √† l‚Äôemprunt.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>18,504 ‚àí 9,870 = 8,634</code>.
            </div>
        </div>

        <!-- Exercice 17 ‚Äì Addition pi√©geuse -->
        <div class="exercice" data-points="1">
            <h3>Exercice 17 ‚Äì Addition pi√©geuse</h3>
            <div class="enonce">
                Calcule : <strong>0,856 + 14,2 + 3,075</strong>
            </div>
            <div class="meta">
                üßÆ Longueurs diff√©rentes ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="18.131" placeholder="R√©ponse">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Tu peux √©crire <code>14,200</code> pour avoir trois chiffres apr√®s la virgule dans chaque nombre.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>0,856 + 14,200 + 3,075 = 18,131</code>.
            </div>
        </div>

        <!-- ===================================================
             PARTIE C ‚Äì EXERCICES SUPPL√âMENTAIRES + COLONNE
        ====================================================== -->

        <h2>Partie C ‚Äì Exercices suppl√©mentaires et op√©ration pos√©e</h2>

        <!-- Exercice 18 ‚Äì Probl√®me suppl√©mentaire -->
        <div class="exercice" data-points="1">
            <h3>Exercice 18 ‚Äì Lecture d‚Äôun roman</h3>
            <div class="enonce">
                Un √©l√®ve lit <strong>18,5&nbsp;pages</strong> le lundi et <strong>23,75&nbsp;pages</strong> le mardi.
                Combien de pages a-t-il lues au total ?
            </div>
            <div class="meta">
                üìñ Somme de d√©cimaux ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="42.25" placeholder="R√©ponse en pages">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Additionne <code>18,5</code> et <code>23,75</code>. Tu peux √©crire <code>18,50</code> si besoin.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>18,5 + 23,75 = 42,25</code>. L‚Äô√©l√®ve a lu <strong>42,25&nbsp;pages</strong>.
            </div>
        </div>

        <!-- Exercice 19 ‚Äì Courses au march√© -->
        <div class="exercice" data-points="1">
            <h3>Exercice 19 ‚Äì Courses au march√©</h3>
            <div class="enonce">
                Au march√©, un client ach√®te des fruits pour <strong>7,85&nbsp;‚Ç¨</strong> et des l√©gumes pour
                <strong>5,9&nbsp;‚Ç¨</strong>. Il paie avec un billet de <strong>20&nbsp;‚Ç¨</strong>. Combien de monnaie
                doit-on lui rendre ?
            </div>
            <div class="meta">
                üß∫ Monnaie √† rendre ‚Äì <strong>1 point</strong>
            </div>
            <div class="zone-reponse">
                <input type="text" class="reponse" data-correct="6.25" placeholder="R√©ponse en ‚Ç¨">
                <button class="btn btn-valider">Valider</button>
                <button class="btn btn-aide">Aide</button>
                <button class="btn btn-correction">Correction</button>
                <span class="message"></span>
            </div>
            <div class="aide-texte">
                üí° Calcule d‚Äôabord la d√©pense totale, puis soustrais-la √† 20.
            </div>
            <div class="correction-texte">
                ‚úÖ <code>7,85 + 5,9 = 13,75</code>, puis <code>20 ‚àí 13,75 = 6,25</code>.
            </div>
        </div>

        <!-- Exercice 20 ‚Äì Op√©ration pos√©e en colonne fa√ßon GeoGebra -->
        <div class="exercice" data-points="2">
            <h3>Exercice 20 ‚Äì Addition en colonne (type GeoGebra)</h3>
            <div class="enonce">
                Pose et calcule en colonne : <strong>47,35 + 18,7</strong>.<br>
                Compl√®te uniquement la ligne du r√©sultat.
            </div>
            <div class="meta">
                üìê Technique op√©ratoire en colonne ‚Äì <strong>2 points</strong>
            </div>

            <table class="colonne-op">
                <!-- Tableau repr√©sentant l‚Äôop√©ration pos√©e -->

                <tr>
                    <!-- Ligne du premier nombre (47,35) -->

                    <td></td>
                    <!-- Case vide pour les centaines (non utilis√©es ici) -->

                    <td>4</td>
                    <!-- Dizaines -->

                    <td>7</td>
                    <!-- Unit√©s -->

                    <td>,</td>
                    <!-- Virgule -->

                    <td>3</td>
                    <!-- Dixi√®me -->

                    <td>5</td>
                    <!-- Centi√®me -->
                </tr>

                <tr class="ligne-signe">
                    <!-- Ligne du second nombre (18,70) avec signe + -->

                    <td>+</td>
                    <!-- Signe plus -->

                    <td>1</td>
                    <!-- Dizaines -->

                    <td>8</td>
                    <!-- Unit√©s -->

                    <td>,</td>
                    <!-- Virgule -->

                    <td>7</td>
                    <!-- Dixi√®me (18,7 ‚Üí 18,70) -->

                    <td></td>
                    <!-- Centi√®me (0 implicite) -->
                </tr>

                <tr class="separateur">
                    <!-- Ligne de s√©paration (trait de l‚Äôop√©ration) -->

                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>

                <tr>
                    <!-- Ligne du r√©sultat √† compl√©ter -->

                    <td></td>
                    <!-- Case vide -->

                    <td><input type="text" maxlength="1" class="digit" data-weight="10"></td>
                    <!-- Dizaines du r√©sultat -->

                    <td><input type="text" maxlength="1" class="digit" data-weight="1"></td>
                    <!-- Unit√©s du r√©sultat -->

                    <td>,</td>
                    <!-- Virgule fixe -->

                    <td><input type="text" maxlength="1" class="digit" data-weight="0.1"></td>
                    <!-- Dixi√®me -->

                    <td><input type="text" maxlength="1" class="digit" data-weight="0.01"></td>
                    <!-- Centi√®me -->
                </tr>
            </table>

            <div class="zone-reponse">
                <!-- Zone de boutons pour l‚Äôexercice colonne -->

                <button class="btn btn-valider" data-colonne="47.35+18.7">Valider</button>
                <!-- Bouton valider sp√©cifique avec attribut data-colonne -->

                <button class="btn btn-aide">Aide</button>
                <!-- Bouton aide -->

                <button class="btn btn-correction">Correction</button>
                <!-- Bouton correction -->

                <span class="message"></span>
                <!-- Message de feedback -->
            </div>

            <div class="aide-texte">
                <!-- Aide pour la colonne -->

                üí° Commence par calculer le r√©sultat (au brouillon ou mentalement), puis place chaque chiffre dans la
                bonne colonne (dizaines, unit√©s, dixi√®mes, centi√®mes).
            </div>

            <div class="correction-texte">
                <!-- Correction pour l‚Äôop√©ration pos√©e -->

                ‚úÖ <code>47,35 + 18,70 = 66,05</code>. La derni√®re ligne doit √™tre : <strong>6 6 , 0 5</strong>.
            </div>
        </div>

    </main>
    <!-- Fin du bloc principal -->

    <script>
        // ============================================
        //  SCRIPT JAVASCRIPT INTERACTIF
        // ============================================

        // Fonction utilitaire : transformer une cha√Æne en nombre d√©cimal
        function normalizeToNumber(value) {
            // Remplace la virgule par un point et supprime les espaces
            const cleaned = value.replace(',', '.').trim();
            // Convertit en nombre √† virgule flottante
            const num = parseFloat(cleaned);
            // Retourne le nombre (ou NaN si ce n‚Äôest pas un nombre)
            return num;
        }

        // Fonction pour jouer un petit bip (succ√®s ou erreur)
        function playBeep(success) {
            // R√©cup√®re le constructeur AudioContext selon le navigateur
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            // Si pas d‚ÄôAPI audio disponible, on ne fait rien
            if (!AudioContext) return;

            // Cr√©e un nouveau contexte audio
            const ctx = new AudioContext();
            // Cr√©e un oscillateur (g√©n√©rateur de son)
            const osc = ctx.createOscillator();
            // Cr√©e un gain (volume)
            const gain = ctx.createGain();

            // Connecte l‚Äôoscillateur au gain puis au haut-parleur
            osc.connect(gain);
            gain.connect(ctx.destination);

            // Choix de fr√©quence selon succ√®s (aigu) ou erreur (grave)
            osc.frequency.value = success ? 880 : 220;

            // Volume de d√©part
            gain.gain.value = 0.2;

            // D√©marre le son imm√©diatement
            osc.start();

            // Fait d√©cro√Ætre le volume sur 0,2 seconde
            gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.2);

            // Arr√™te l‚Äôoscillateur au bout de 0,25 seconde
            osc.stop(ctx.currentTime + 0.25);
        }

        // Variable globale : score total
        let totalScore = 0;
        // Variable globale : score maximal possible
        let maxScore = 0;

        // Fonction pour calculer le score maximal √† partir de data-points
        function computeMaxScore() {
            // S√©lectionne tous les blocs d‚Äôexercices
            const exercices = document.querySelectorAll('.exercice');
            // Initialise un cumul
            let max = 0;
            // Parcours de chaque exercice
            exercices.forEach(ex => {
                // R√©cup√®re l‚Äôattribut data-points (nombre de points)
                const pts = parseFloat(ex.getAttribute('data-points')) || 0;
                // Ajoute au cumul
                max += pts;
            });
            // Met √† jour la variable globale
            maxScore = max;
            // Met √† jour l‚Äôaffichage dans le span #scoreMax
            const scoreMaxSpan = document.getElementById('scoreMax');
            if (scoreMaxSpan) {
                scoreMaxSpan.textContent = maxScore;
            }
        }

        // Fonction pour rafra√Æchir l‚Äôaffichage du score
        function updateScoreDisplay() {
            // R√©cup√®re le span #score
            const scoreSpan = document.getElementById('score');
            // Si trouv√©, met √† jour le texte
            if (scoreSpan) {
                scoreSpan.textContent = totalScore;
            }
        }

        // Fonction pour configurer le bouton d‚Äôaffichage du cours
        function setupCoursToggle() {
            // R√©cup√®re le bouton
            const btnCours = document.getElementById('btnCours');
            // R√©cup√®re le bloc de cours
            const blocCours = document.getElementById('blocCours');
            // Si l‚Äôun des deux manque, on ne fait rien
            if (!btnCours || !blocCours) return;

            // Ajoute un √©couteur de clic
            btnCours.addEventListener('click', () => {
                // Si le bloc est cach√©, on l‚Äôaffiche ; sinon on le cache
                blocCours.style.display =
                    (blocCours.style.display === 'none' || blocCours.style.display === '') ? 'block' : 'none';
            });
        }

        // Fonction pour v√©rifier un exercice "classique" avec une seule r√©ponse num√©rique
        function checkStandardExercise(exerciceDiv) {
            // R√©cup√®re le champ de saisie de r√©ponse
            const input = exerciceDiv.querySelector('input.reponse');
            // R√©cup√®re la zone de message
            const messageSpan = exerciceDiv.querySelector('.message');
            // R√©cup√®re le nombre de points pour cet exercice
            const pts = parseFloat(exerciceDiv.getAttribute('data-points')) || 0;

            // V√©rifie que tous les √©l√©ments existent
            if (!input || !messageSpan) return;

            // R√©cup√®re la valeur saisie par l‚Äô√©l√®ve
            const userValue = input.value;
            // Convertit en nombre
            const userNum = normalizeToNumber(userValue);

            // R√©cup√®re la valeur correcte (stock√©e dans data-correct)
            const correctStr = input.getAttribute('data-correct') || '';
            // Convertit en nombre
            const correctNum = parseFloat(correctStr);

            // Si l‚Äô√©l√®ve n‚Äôa pas donn√© de valeur num√©rique valable
            if (isNaN(userNum)) {
                // Affiche un message d‚Äôerreur
                messageSpan.textContent = '‚ùó Entre une valeur num√©rique.';
                messageSpan.classList.remove('ok');
                messageSpan.classList.add('ko');
                // Son d‚Äôerreur
                playBeep(false);
                // Sortie de la fonction
                return;
            }

            // Calcule la diff√©rence absolue entre la r√©ponse et la valeur correcte
            const diff = Math.abs(userNum - correctNum);
            // D√©finit une petite tol√©rance d‚Äôarrondi
            const tolerance = 0.005;

            // V√©rifie si l‚Äôexercice a d√©j√† √©t√© valid√© pr√©c√©demment
            const alreadyCorrect = exerciceDiv.getAttribute('data-correct-done') === 'true';

            // Si la r√©ponse est suffisamment proche de la valeur correcte
            if (diff <= tolerance) {
                // Si l‚Äôexercice n‚Äô√©tait pas encore comptabilis√© comme correct
                if (!alreadyCorrect) {
                    // Ajoute les points au score total
                    totalScore += pts;
                    // Marque l‚Äôexercice comme valid√©
                    exerciceDiv.setAttribute('data-correct-done', 'true');
                }
                // Message de r√©ussite
                messageSpan.textContent = '‚úÖ Bravo, c‚Äôest correct !';
                messageSpan.classList.remove('ko');
                messageSpan.classList.add('ok');
                // Son de r√©ussite
                playBeep(true);
            } else {
                // Si la r√©ponse est fausse, aucun point ajout√©
                messageSpan.textContent = '‚ùå √Ä corriger.';
                messageSpan.classList.remove('ok');
                messageSpan.classList.add('ko');
                // Son d‚Äôerreur
                playBeep(false);
            }

            // Met √† jour l‚Äôaffichage du score
            updateScoreDisplay();
        }

        // Fonction pour v√©rifier l‚Äôexercice en colonne (exercice 20)
        function checkColonneExercise(exerciceDiv) {
            // R√©cup√®re le bouton Valider sp√©cifique avec attribut data-colonne
            const btn = exerciceDiv.querySelector('.zone-reponse .btn-valider[data-colonne]');
            // R√©cup√®re la zone de message
            const messageSpan = exerciceDiv.querySelector('.message');
            // R√©cup√®re les champs "digit" (un par case de r√©sultat)
            const digitInputs = exerciceDiv.querySelectorAll('input.digit');
            // R√©cup√®re le nombre de points
            const pts = parseFloat(exerciceDiv.getAttribute('data-points')) || 0;

            // V√©rifie que tout existe
            if (!btn || !messageSpan || digitInputs.length === 0) return;

            // R√©cup√®re l‚Äôexpression stock√©e dans data-colonne (ex : "47.35+18.7")
            const expr = btn.getAttribute('data-colonne') || '';
            // S√©pare les deux nombres autour du signe +
            const parts = expr.split('+');
            // Convertit chaque partie en nombre
            const a = parseFloat(parts[0]);
            const b = parseFloat(parts[1]);
            // Calcule le r√©sultat attendu (somme)
            const expected = a + b;

            // Initialise un total calcul√© √† partir des digits
            let computed = 0;
            // Variable pour savoir si un champ est vide
            let empty = false;

            // Parcourt les inputs "digit"
            digitInputs.forEach(input => {
                // R√©cup√®re la valeur saisie
                const v = input.value.trim();
                // Si une case est vide, on le note
                if (v === '') {
                    empty = true;
                }
                // Convertit en entier
                const d = parseInt(v, 10);
                // Valeur de position (dizaines, unit√©s, dixi√®mes, centi√®mes)
                const weight = parseFloat(input.getAttribute('data-weight')) || 0;
                // Si le contenu est un chiffre valide
                if (!isNaN(d)) {
                    // Ajoute au total, pond√©r√© par sa position
                    computed += d * weight;
                }
            });

            // Si un champ est vide, on signale qu‚Äôil manque quelque chose
            if (empty) {
                messageSpan.textContent = '‚ùó Remplis toutes les cases du r√©sultat.';
                messageSpan.classList.remove('ok');
                messageSpan.classList.add('ko');
                playBeep(false);
                return;
            }

            // Compare le r√©sultat calcul√© √† la valeur attendue
            const diff = Math.abs(computed - expected);
            // Tol√©rance pour l‚Äôarrondi
            const tolerance = 0.0005;

            // V√©rifie si d√©j√† valid√© auparavant
            const alreadyCorrect = exerciceDiv.getAttribute('data-correct-done') === 'true';

            // Si la diff√©rence est tr√®s petite, on consid√®re que c‚Äôest correct
            if (diff <= tolerance) {
                // Si ce n‚Äô√©tait pas d√©j√† valid√©, on ajoute les points
                if (!alreadyCorrect) {
                    totalScore += pts;
                    exerciceDiv.setAttribute('data-correct-done', 'true');
                }
                // Message de r√©ussite
                messageSpan.textContent = '‚úÖ Bravo, tu as bien pos√© et calcul√© l‚Äôaddition !';
                messageSpan.classList.remove('ko');
                messageSpan.classList.add('ok');
                // Son de succ√®s
                playBeep(true);
            } else {
                // R√©ponse incorrecte
                messageSpan.textContent = '‚ùå Le r√©sultat pos√© n‚Äôest pas correct, v√©rifie tes retenues.';
                messageSpan.classList.remove('ok');
                messageSpan.classList.add('ko');
                // Son d‚Äôerreur
                playBeep(false);
            }

            // Mise √† jour du score affich√©
            updateScoreDisplay();
        }

        // Fonction pour installer les gestionnaires d‚Äô√©v√©nements sur tous les exercices
        function setupExercises() {
            // S√©lectionne tous les blocs d‚Äôexercices
            const exercices = document.querySelectorAll('.exercice');

            // Parcours de chaque exercice
            exercices.forEach(ex => {
                // R√©cup√®re tous les boutons Valider de cet exercice
                const btnValiderList = ex.querySelectorAll('.btn-valider');
                // R√©cup√®re le bouton Aide
                const btnAide = ex.querySelector('.btn-aide');
                // R√©cup√®re le bouton Correction
                const btnCorrection = ex.querySelector('.btn-correction');
                // R√©cup√®re les textes d‚Äôaide et de correction
                const aideTexte = ex.querySelector('.aide-texte');
                const corrTexte = ex.querySelector('.correction-texte');

                // Pour chaque bouton Valider
                btnValiderList.forEach(btn => {
                    // V√©rifie s‚Äôil s‚Äôagit d‚Äôun exercice "colonne" (pr√©sence de data-colonne)
                    const isColonne = btn.hasAttribute('data-colonne');

                    // Ajoute un gestionnaire de clic
                    btn.addEventListener('click', () => {
                        // Si c‚Äôest un exercice en colonne, on appelle checkColonneExercise
                        if (isColonne) {
                            checkColonneExercise(ex);
                        } else {
                            // Sinon, exercice standard (une r√©ponse num√©rique simple)
                            checkStandardExercise(ex);
                        }
                    });
                });

                // Gestion du bouton Aide (affiche/masque le texte d‚Äôaide)
                if (btnAide && aideTexte) {
                    btnAide.addEventListener('click', () => {
                        // Bascule l‚Äôaffichage entre block et none
                        aideTexte.style.display =
                            (aideTexte.style.display === 'none' || aideTexte.style.display === '') ? 'block' : 'none';
                    });
                }

                // Gestion du bouton Correction (affiche/masque le texte de correction)
                if (btnCorrection && corrTexte) {
                    btnCorrection.addEventListener('click', () => {
                        // Bascule l‚Äôaffichage
                        corrTexte.style.display =
                            (corrTexte.style.display === 'none' || corrTexte.style.display === '') ? 'block' : 'none';
                    });
                }
            });
        }

        // Fonction pour r√©initialiser toutes les r√©ponses et le score
        function setupResetButton() {
            // R√©cup√®re le bouton de reset
            const btnReset = document.getElementById('btnReset');
            // Si le bouton n‚Äôexiste pas, on quitte
            if (!btnReset) return;

            // Ajout de l‚Äô√©v√©nement clic
            btnReset.addEventListener('click', () => {
                // Remet le score total √† z√©ro
                totalScore = 0;
                // Met √† jour l‚Äôaffichage
                updateScoreDisplay();

                // S√©lectionne tous les exercices
                const exercices = document.querySelectorAll('.exercice');
                exercices.forEach(ex => {
                    // Supprime le marqueur "d√©j√† correct"
                    ex.removeAttribute('data-correct-done');

                    // R√©initialise tous les champs texte
                    const inputs = ex.querySelectorAll('input[type="text"]');
                    inputs.forEach(inp => {
                        inp.value = '';
                    });

                    // R√©initialise les messages
                    const messageSpan = ex.querySelector('.message');
                    if (messageSpan) {
                        messageSpan.textContent = '';
                        messageSpan.classList.remove('ok', 'ko');
                    }

                    // Cache les aides et corrections
                    const aideTexte = ex.querySelector('.aide-texte');
                    const corrTexte = ex.querySelector('.correction-texte');
                    if (aideTexte) aideTexte.style.display = 'none';
                    if (corrTexte) corrTexte.style.display = 'none';
                });

                // Son de "reset" (on prend le son d‚Äôerreur pour changer)
                playBeep(false);
            });
        }

        // Quand la page est enti√®rement charg√©e, on initialise tout
        window.addEventListener('DOMContentLoaded', () => {
            // Calcule le score maximal total
            computeMaxScore();
            // Met √† jour l‚Äôaffichage initial du score
            updateScoreDisplay();
            // Met en place le bouton de rappel de cours
            setupCoursToggle();
            // Met en place les √©v√©nements sur les exercices
            setupExercises();
            // Met en place le bouton de r√©initialisation
            setupResetButton();
        });
    </script>
    <!-- Fin du script -->

</body>
<!-- Fin du corps -->

</html>
<!-- Fin du document -->
